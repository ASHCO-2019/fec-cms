{% load wagtailimages_tags %}
{% load staticfiles %}
<div class="js-top-entities content__section" data-category="{{ category }}" data-cycle="{{ cycle }}"" data-perpage="{{ per_page }}">
  <span class="t-sans js-dates">{{ coverage_start_date|date }} to {{ coverage_end_date|date }}</span>
  <div class="chart-table simple-table--responsive js-top-table" id="top-table" aria-live="polite" role="grid">
    <div role="row" class="simple-table__header">
      <div role="columnheader" class="simple-table__header-cell cell--40">Name</div>
      <div role="columnheader" class="simple-table__header-cell cell--20 t-right-aligned">Total {{ action }}</div>
      <div role="columnheader" class="simple-table__header-cell cell--40"></div>
    </div>
  {% for datum in data %}
    <div role="row" class="js-top-row simple-table__row">
      <div role="gridcell" class="simple-table__cell">{{ loop.index }}.
        <a href="/data/{{ route }}/{{ datum.id_field }}/?cycle={{ cycle }}&election_full=false" title="{{ datum.name_field }}">{{ datum.name_field }}</a>
        {% if datum.party %}
          [{{ datum.party | upper }}]
        {% endif %}
      </div>
      <div class="simple-table__cell t-right-aligned">{{ datum.value_field  }}</div>
      <div class="simple-table__cell">
        <div class="bar-container">
          <div class="value-bar" data-value="{{ datum.value_field }}" data-party="{{ datum.party }}"></div>
        </div>
      </div>
    </div>
  {% endfor %}
  </div>
  <div class="results-info">
    <button class="js-previous button button--standard button--previous"><span class="u-visually-hidden">Previous page</span></button>
    <button class="js-next button button--standard button--next"><span class="u-visually-hidden">Next page</span></button>
    <div class="u-float-right t-sans">
      Showing <span class="js-page-info">{{ page_info }}</span> entries
    </div>
  </div>
</div>
<div class="content__section row">
  <ul class="list--buttons u-float-right">
    <li><a class="button button--standard button--table" href="/data/{{ value_field }}">Browse {{value_field}}</a></li>
    <li><button class="button button--alt js-ga-event"  data-a11y-dialog-show="{{ action }}-modal" data-ga-event="{{ action }} methodology modal clicked" aria-controls="{{ action }}-modal">Methodology</button></li>
  </ul>
</div>